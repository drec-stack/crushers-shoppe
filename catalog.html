<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crushers Shoppe - Каталог</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&family=Raleway:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <div id="header"></div>

    <!-- Catalog Container -->
    <div class="catalog-container">
        <div class="catalog-header">
            <h1>Каталог</h1>
            <p>Черно-белая коллекция одежды и аксессуаров</p>
        </div>

        <!-- Filters -->
        <aside class="filters-sidebar">
            <div class="filter-section">
                <h3>Категории</h3>
                <div class="filter-options">
                    <label class="filter-option">
                        <input type="checkbox" checked>
                        <span>Вся одежда</span>
                    </label>
                    <label class="filter-option">
                        <input type="checkbox">
                        <span>Верхняя одежда</span>
                    </label>
                    <label class="filter-option">
                        <input type="checkbox">
                        <span>Футболки</span>
                    </label>
                    <label class="filter-option">
                        <input type="checkbox">
                        <span>Рубашки</span>
                    </label>
                    <label class="filter-option">
                        <input type="checkbox">
                        <span>Брюки</span>
                    </label>
                    <label class="filter-option">
                        <input type="checkbox">
                        <span>Костюмы</span>
                    </label>
                </div>
            </div>

            <div class="filter-section">
                <h3>Цвет</h3>
                <div class="filter-options">
                    <label class="filter-option">
                        <input type="checkbox" checked>
                        <span>Черный</span>
                    </label>
                    <label class="filter-option">
                        <input type="checkbox" checked>
                        <span>Белый</span>
                    </label>
                    <label class="filter-option">
                        <input type="checkbox">
                        <span>Серый</span>
                    </label>
                </div>
            </div>

            <div class="filter-section">
                <h3>Цена</h3>
                <div class="price-range">
                    <input type="range" min="0" max="50000" value="25000" class="price-slider" id="priceRange">
                    <div class="price-values">
                        <span>0 ₽</span>
                        <span id="currentPrice">25000 ₽</span>
                        <span>50000 ₽</span>
                    </div>
                </div>
            </div>

            <div class="filter-section">
                <h3>Размер</h3>
                <div class="size-options">
                    <button class="size-btn">XS</button>
                    <button class="size-btn">S</button>
                    <button class="size-btn active">M</button>
                    <button class="size-btn">L</button>
                    <button class="size-btn">XL</button>
                </div>
            </div>

            <button class="apply-filters-btn" id="applyFilters">Применить фильтры</button>
        </aside>

        <!-- Products -->
        <main class="catalog-main">
            <div class="catalog-controls">
                <div class="sort-controls">
                    <label for="sort">Сортировать:</label>
                    <select id="sort">
                        <option value="popular">По популярности</option>
                        <option value="price-low">Сначала дешевые</option>
                        <option value="price-high">Сначала дорогие</option>
                        <option value="new">Новинки</option>
                    </select>
                </div>
                <div class="view-controls">
                    <span id="productsCount">12 товаров</span>
                </div>
            </div>

            <div class="products-grid" id="productsGrid">
                <!-- Products loaded by JavaScript -->
                <div class="loading">
                    <div class="spinner"></div>
                </div>
            </div>
        </main>
    </div>

    <!-- Footer -->
    <div id="footer"></div>

    <script src="script.js"></script>
    <script>
        // Product data
        const products = [
            { id: 1, name: "Черный оверсайз худи", price: 8990, category: "hoodies", color: "black", size: ["S", "M", "L", "XL"], image: "https://images.unsplash.com/photo-1556821840-3a63f95609a7?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", badge: "Essentials" },
            { id: 2, name: "Белая футболка с принтом", price: 4990, category: "tshirts", color: "white", size: ["XS", "S", "M", "L"], image: "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", badge: null },
            { id: 3, name: "Черная кожаная куртка", price: 34990, category: "jackets", color: "black", size: ["S", "M", "L"], image: "https://images.unsplash.com/photo-1551028719-00167b16eac5?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", badge: "Premium" },
            { id: 4, name: "Серый шерстяной костюм", price: 28990, category: "suits", color: "gray", size: ["M", "L", "XL"], image: "https://images.unsplash.com/photo-1594938350601-4adf1f8a1c5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", badge: "Premium" },
            { id: 5, name: "Белая рубашка оверсайз", price: 6990, category: "shirts", color: "white", size: ["XS", "S", "M", "L"], image: "https://images.unsplash.com/photo-1596755094514-f87e34085b2c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", badge: null },
            { id: 6, name: "Черные кожаные брюки", price: 15990, category: "pants", color: "black", size: ["S", "M", "L"], image: "https://images.unsplash.com/photo-1542272604-787c3835535d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", badge: "Limited" },
            { id: 7, name: "Черное пальто шерсть", price: 23990, category: "coats", color: "black", size: ["M", "L", "XL"], image: "https://images.unsplash.com/photo-1591047139829-d91aecb6caea?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", badge: "Premium" },
            { id: 8, name: "Белый свитер кашемир", price: 12990, category: "sweaters", color: "white", size: ["XS", "S", "M", "L"], image: "https://images.unsplash.com/photo-1576566588028-4147f3842f27?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", badge: null },
            { id: 9, name: "Черный спортивный костюм", price: 14990, category: "tracksuits", color: "black", size: ["S", "M", "L", "XL"], image: "https://images.unsplash.com/photo-1551028719-00167b16eac5?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", badge: "Essentials" },
            { id: 10, name: "Бежевый тренч", price: 18990, category: "coats", color: "gray", size: ["S", "M", "L"], image: "https://images.unsplash.com/photo-1594938350601-4adf1f8a1c5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", badge: null },
            { id: 11, name: "Черная базовая футболка", price: 2990, category: "tshirts", color: "black", size: ["XS", "S", "M", "L", "XL"], image: "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", badge: "Essentials" },
            { id: 12, name: "Серый кардиган", price: 8990, category: "sweaters", color: "gray", size: ["S", "M", "L"], image: "https://images.unsplash.com/photo-1576566588028-4147f3842f27?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", badge: null }
        ];

        document.addEventListener('DOMContentLoaded', function() {
            fetch('header.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('header').innerHTML = data;
                    document.querySelectorAll('.nav-link').forEach(link => {
                        if(link.getAttribute('href') === 'catalog.html') {
                            link.classList.add('active');
                        }
                    });
                });

            fetch('footer.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('footer').innerHTML = data;
                });

            renderProducts(products);
            setupFilters();
            setupSorting();
        });

        function renderProducts(productsToRender) {
            const grid = document.getElementById('productsGrid');
            grid.innerHTML = '';
            
            productsToRender.forEach(product => {
                const productHTML = `
                    <a href="#" class="product-card" onclick="event.preventDefault(); addToCartFromCatalog(${product.id})">
                        <div class="product-image">
                            <img src="${product.image}" alt="${product.name}">
                            ${product.badge ? `<div class="product-badge">${product.badge}</div>` : ''}
                        </div>
                        <div class="product-info">
                            <h3>${product.name}</h3>
                            <p class="product-price">${product.price.toLocaleString()} ₽</p>
                        </div>
                    </a>
                `;
                grid.innerHTML += productHTML;
            });
            
            document.getElementById('productsCount').textContent = `${productsToRender.length} товаров`;
        }

        function setupFilters() {
            // Price range
            const priceSlider = document.getElementById('priceRange');
            const currentPrice = document.getElementById('currentPrice');
            
            priceSlider.addEventListener('input', function() {
                currentPrice.textContent = `${parseInt(this.value).toLocaleString()} ₽`;
            });
            
            // Size buttons
            document.querySelectorAll('.size-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.size-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // Apply filters button
            document.getElementById('applyFilters').addEventListener('click', function() {
                const maxPrice = parseInt(priceSlider.value);
                const selectedSize = document.querySelector('.size-btn.active')?.textContent;
                
                let filtered = products.filter(p => p.price <= maxPrice);
                
                if (selectedSize) {
                    filtered = filtered.filter(p => p.size.includes(selectedSize));
                }
                
                renderProducts(filtered);
                showToast(`Найдено ${filtered.length} товаров`, 'success');
            });
        }

        function setupSorting() {
            document.getElementById('sort').addEventListener('change', function() {
                let sorted = [...products];
                
                switch(this.value) {
                    case 'price-low':
                        sorted.sort((a, b) => a.price - b.price);
                        break;
                    case 'price-high':
                        sorted.sort((a, b) => b.price - a.price);
                        break;
                    case 'new':
                        sorted.reverse();
                        break;
                }
                
                renderProducts(sorted);
            });
        }

        function addToCartFromCatalog(id) {
            const product = products.find(p => p.id === id);
            if (product) {
                addToCart(product.id, product.name, product.price, product.image);
            }
        }
    </script>
</body>
</html>
